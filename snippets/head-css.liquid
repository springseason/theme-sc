{%- unless settings.type_header_font.system? and settings.type_body_font.system? -%}
  <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
{%- endunless -%}

{%- liquid
  assign default_palette = settings.color_schemes['default-palette'].settings

  assign body_font_bold = settings.type_body_font | font_modify: 'weight', 'bold'
  assign body_font_italic = settings.type_body_font | font_modify: 'style', 'italic'
  assign body_font_bold_italic = body_font_bold | font_modify: 'style', 'italic'
%}

{%- unless settings.type_body_font.system? -%}
  {{ settings.type_body_font | font_url | preload_tag: as: 'font', type: 'font/woff2' }}
{%- endunless -%}
{%- unless settings.type_header_font.system? -%}
  {{ settings.type_header_font | font_url | preload_tag: as: 'font', type: 'font/woff2' }}
{%- endunless -%}

{%- style -%}
{% comment %}
Shopify font faces
{% endcomment %}
{{ settings.type_body_font | font_face: font_display: 'swap' }}
{{ body_font_bold | font_face: font_display: 'swap' }}
{{ body_font_italic | font_face: font_display: 'swap' }}
{{ body_font_bold_italic | font_face: font_display: 'swap' }}
{{ settings.type_header_font | font_face: font_display: 'swap' }}

:root {
  {% comment %}
    Font settings
  {% endcomment %}
  --font-body-family: {{ settings.type_body_font.family }}, {{ settings.type_body_font.fallback_families }};
  --font-body-style: {{ settings.type_body_font.style }};
  --font-body-weight: {{ settings.type_body_font.weight }};
  --font-body-scale: {{ settings.body_scale | divided_by: 100.0 }};

  --font-heading-family: {{ settings.type_header_font.family }}, {{ settings.type_header_font.fallback_families }};
  --font-heading-style: {{ settings.type_header_font.style }};
  --font-heading-weight: {{ settings.type_header_font.weight }};
  --font-heading-scale: {{ settings.heading_scale | times: 1.0 | divided_by: settings.body_scale }};

  {% comment %}
    Shopify colors
  {% endcomment %}
  {% if default_palette != empty %}
  --default-bg: {{ default_palette.background }};
  --default-gradient: {{ default_palette.background_gradient | default: '' }};
  --default-text: {{ default_palette.text }};
  --default-button: {{ default_palette.button }};
  --default-button-label: {{ default_palette.button_label }};
  --default-shadow: {{ default_palette.shadow }};
  --default-hover: {{ default_palette.hover }};
  {% endif %}
}
{%- endstyle -%}
