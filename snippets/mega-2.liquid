<!--
  links: section.settings.menu.links
  colors
  menu_colors
  featured_collection_1: section.settings.featured_collection_1
  featured_collection_2: section.settings.featured_collection_2
-->
<ul class="header-menu gap-4 xl:gap-8">
  {% for link in links %}
    {%- assign id = link.title | downcase | prepend: 'nav-' -%}
    <li
      id="{{ id }}"
      class="header-nav"
      @click="$el.querySelector('a[href]')?.click()"
      {%- if link.links != blank -%}
        x-data="{ open: false }"
        @mouseenter="open = true"
        @mouseleave="open = false"
        aria-haspopup="true"
        :aria-expanded="open ? 'true' : 'false'"
      {%- endif -%}
    >
      {%- if link.links != blank -%}
        <div class="relative flex">
          <!--
            Item active: "border-indigo-600 text-indigo-600", Item inactive: "border-transparent text-gray-700 hover:text-gray-800"
          -->
          <a
            href="{{ link.url }}"
            {% if link.active %}
              class="active"
            {% endif %}
          >
            {{ link.title | escape }}
          </a>
        </div>

        <!--
          Entering: "transition ease-out duration-200"
            From: "opacity-0"
            To: "opacity-100"
          Leaving: "transition ease-in duration-150"
            From: "opacity-100"
            To: "opacity-0"
        -->
        <div
          class="absolute inset-x-0 top-full sm:text-sm mega-menu"
          x-cloak
          x-transition
          x-show="open"
        >
          <!--
            Presentational element used to render the bottom shadow, if we put the shadow on the actual panel it pokes out the top, so we use this shorter element to hide the top of the shadow
          -->
          <div class="absolute inset-0 top-1/2 shadow" aria-hidden="true"></div>

          <div class="relative">
            <div class="mx-auto max-w-7xl px-8">
              <div class="grid grid-cols-2 items-start gap-x-8 gap-y-10 pb-12 pt-10">
                <div class="grid grid-cols-3 gap-x-8 gap-y-10">
                  {%- for childlink in link.links -%}
                    <div>
                      {%- if childlink.links != blank -%}
                        <a id="desktop-featured-heading-0" class="font-extrabold" href="{{ childlink.url }}">
                          {{ childlink.title }}
                        </a>
                        <ul
                          role="list"
                          aria-labelledby="desktop-featured-heading-0"
                          class="mt-6 space-y-6 sm:mt-4 sm:space-y-4"
                        >
                          {%- for link in childlink.links -%}
                            <li class="flex">
                              <a href="{{ link.url }}">
                                {{- link.title -}}
                              </a>
                            </li>
                          {%- endfor -%}
                        </ul>
                      {%- else -%}
                        <a
                          href="{{ childlink.url }}"
                          class="flex items-center text-sm font-medium"
                        >
                          {{ childlink.title | escape }}
                        </a>
                      {%- endif -%}
                    </div>
                  {%- endfor -%}
                </div>
                <div class="grid grid-cols-2 gap-x-4">
                  <div class="group relative text-sm cursor-pointer">
                    <div class="aspect-h-1 aspect-w-1 overflow-hidden rounded-lg group-hover:opacity-75">
                      <img
                        src="{{ featured_collection_1.image | image_url }}"
                        alt="Models sitting back to back, wearing Basic Tee in black and bone."
                        class="object-cover object-center"
                        height="220"
                        width="220"
                      >
                    </div>
                    <a href="{{ featured_collection_1.url | escape }}" class="mt-6 block font-medium">
                      <span class="absolute inset-0 z-10" aria-hidden="true"></span>
                      {{ featured_collection_1.title | escape }}
                    </a>
                    <p aria-hidden="true" class="mt-1">Shop now</p>
                  </div>
                  <div class="group relative text-sm">
                    <div class="aspect-h-1 aspect-w-1 overflow-hidden rounded-lg group-hover:opacity-75">
                      <img
                        src="{{ featured_collection_2.image | image_url }}"
                        alt="Models sitting back to back, wearing Basic Tee in black and bone."
                        class="object-cover object-center"
                        height="220"
                        width="220"
                      >
                    </div>
                    <a href="{{ featured_collection_2.url }}" class="mt-6 block font-medium">
                      <span class="absolute inset-0 z-10" aria-hidden="true"></span>
                      {{ featured_collection_2.title | escape }}
                    </a>
                    <p aria-hidden="true" class="mt-1">Shop now</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      {%- else -%}
        <a
          href="{{ link.url }}"
          {% if link.active %}
            class="active"
          {% endif %}
        >
          {{ link.title | escape }}
        </a>
      {%- endif -%}
    </li>
  {% endfor %}
</ul>

<style>
  .header-menu {
    display: flex;
    align-items: center;
    padding: 0 1rem;
  }
  .header-menu > li:hover {
    color: {{ colors.hover }};
  }
  .header-menu button {
    -webkit-appearance: none;
    appearance: none;
    -moz-appearance: none;
    background: none;
    border: none;
  }

  {% comment %}
    MEGA MENU
  {% endcomment %}
  .mega-menu {
    background-color: {{ menu_colors.background }};
  }
  .mega-menu a,
  .mega-menu p {
    color: {{ menu_colors.text }};
  }
  .mega-menu a:hover {
    color: {{ menu_colors.hover }};
  }
</style>
